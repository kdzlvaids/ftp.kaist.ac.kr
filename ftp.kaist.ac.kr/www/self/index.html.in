<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="application/xhtml+xml; charset=UTF-8"/>
    <title>ftp.kaist.ac.kr</title>
    <link rel="alternate" type="application/rss+xml" href="http://twitter.com/statuses/user_timeline/44532082.rss" title="Latest News"/>
    <link rel="alternate" type="application/rss+xml" href="/geoul/pkgs/news.feed" title="Latest Updates on Mirrored Package"/>
    <link rel="alternate" type="application/rss+xml" href="/geoul/pkgs/problems.feed" title="Current Problems of Our Mirrors"/>
    <style type="text/css"><!--
        #contents {
            position: absolute;
        }
        #message {
            position: absolute;
            left: 12em;
            right: 1em;
        }
        a img {
            border: none;
        }
        .logos {
            text-align: center;
            vertical-align: middle;
        }
        .logos a img {
            margin-left: 20px;
            margin-right: 20px;
        }
    --></style>
    <script type="text/javascript" src=".self/jquery-1.4.4.min.js"></script>
</head>

<body>
<h1>ftp.kaist.ac.kr</h1>

<div id="contents">
<ul>
    <!-- begin of contents -->
    <li>...</li>
    <!-- end of contents -->
</ul>
</div>

<div id="message">

<h2>Latest News</h2>
<div id="news">
    <ul id="twitter_update_list" class="embedded-feed"><!-- Tweets --></ul>
    <div style="text-align:right;">
        <a href="http://geoulmon.appspot.com/sites/ftp.kaist.ac.kr" id="geoulmon-link">monitor status of our mirrors</a>
        |
        <a href="http://twitter.com/kaist_ftp" id="twitter-link">follow us on Twitter</a>
    </div>
    <script type="text/javascript">
        {
            var s = [ "http://twitter.com/javascripts/blogger.js"
                    , "http://twitter.com/statuses/user_timeline/kaist_ftp.json?callback=twitterCallback2&count=5"
                    ]
            for (var i in s) {
                $("<script>").attr({
                        type: "text/javascript",
                        src: s[i]
                        }).appendTo(document.body);
            }
        }
    </script>
</div>

<h2>Introduction</h2>
<p>
Welcome to KAIST File Archive, ftp.kaist.ac.kr!
<br/>
(
AKA
ftp.kr.debian.org,
kr.archive.ubuntu.com,
{ftp,cvsup}2.kr.freebsd.org,
ftp2.kr.vim.org
)
</p>
<p>
We provide mirrors of open source softwares, e.g. Debian, *BSDs,
Mozilla, Apache, etc. and publically available files and software.
Various access methods are available: FTP, HTTP, Rsync or CVSup.
</p>
<p>
This system is running at SPARCS Room, KAIST, Daejeon, Korea, Asia.
Two machines with total 6-core x64 CPUs and 12GB of main memory are
used to keep our 6.5TB RAID storage online.  KAIST and KT sponsored
hardware and network connectivity.  SPARCS operates the whole service.
</p>
<p id="sponsors" class="logos">
<a href="http://www.kaist.ac.kr/"><img alt="KAIST" src=".self/kaist-logo.png"/></a>
<a href="http://www.kt.co.kr/"><img alt="KT" src=".self/kt-logo.png"/></a>
<a href="http://sparcs.kaist.ac.kr/"><img alt="SPARCS" src=".self/sparcs-logo.png"/></a>
</p>
<p>
We run our services using robust, free or open source software, including but
not limited to lighttpd, rsync, and vsftpd on the Debian GNU/Linux operating
system.
</p>
<p id="powered-by" class="logos">
<a href="http://www.debian.org/"><img alt="Debian" src=".self/debian-logo.png"/></a>
<a href="http://www.lighttpd.net/"><img alt="lighttpd" src=".self/lighttpd-logo.png"/></a>
<a href="http://rsync.samba.org/"><img alt="rsync" src=".self/rsync-logo.png"/></a>
</p>


<h2>Statistics</h2>
<p>
Our service is heavily loaded by users from Korea and neighbor countries.
Here is a graph that shows our network traffic for the last month:
<img src="/geoul/usage/by-pkgs.P1M.png"
    alt="Network Usage of ftp.kaist.ac.kr"
    style="display:block; margin:20px auto;"/>
</p>
<p>
This graph shows changes in the size of our archive for the last month:
<img src="/geoul/size/by-pkgs.P1M.png"
    alt="Size of ftp.kaist.ac.kr"
    style="display:block; margin:20px auto;"/>
</p>


<h2>Disclaimer</h2>
<div id="disclaimer">
Use entirely at your own risk -- no warranty is expressed or implied.
<ul>
    <li>None of the service providers in any way whatsoever can be
    responsible for any problems that might be caused by this service.
    </li>
    <li>Every access to this service is recorded and can be used and
    published for the purpose of improving the quality of the service.
    </li>
    <li>We may limit any accesses without forewarning that may prevent
    operators from maintaining reasonable quality of the service.
    </li>
</ul>
</div>

<h2>Pointers</h2>
<p id="pointers">
Contact <a href="mailto:ftp@ftp.kaist.ac.kr">ftp@ftp.kaist.ac.kr</a> for any
problem or suggestion.  You can receive our latest announcements by following
<a href="http://twitter.com/kaist_ftp">kaist_ftp on Twitter</a> and check the
status of our archive from the <a
    href="http://geoulmon.appspot.com/sites/ftp.kaist.ac.kr">status monitoring
    page</a>.  We also provide some details as RSS feeds for those who are
interested in <a href="/geoul/pkgs/news.feed"><img
    src=".self/feed-icon-12x12.png" alt=""/> all updates on our mirrors</a> or
<a href="/geoul/pkgs/problems.feed"><img src=".self/feed-icon-12x12.png"
    alt=""/> problematic updates on them</a>.  Find more information at our <a
    href="http://project.sparcs.org/geoul/">Geoul Project site</a> (in Korean).
</p>

</div>

<!-- enhance contents with their status -->
<script type="text/javascript" src=".self/datetime.js"></script>
<script type="text/javascript">
function eventRef(e) {
    var html = "<a href=\"" + e.href + "\">";
    if (e.timestamp)
        html += "<time datetime=\"" + e.timestamp + "\">" + e.timestamp + "</time>";
    html += "</a>";
    return html;
}
var activeItem = null;
function updateStatus() {
    $.getJSON("/geoul/status.json", function(s){
            var pkgs = s.package;
            $("#contents a").each(function(){
                    var pkg = pkgs[this.id];
                    if (pkg == null) return;
                    var className = "";
                    var desc = "<h2>" + pkg.name + "</h2>";
                    if (pkg.sync != null && pkg.sync.source != null) {
                        desc += "Mirroring from <b>" + pkg.sync.source + "</b>";
                        if (pkg.sync.frequency)
                            desc += "<br>Updates every <b>" + prettyPeriod(pkg.sync.frequency).replace(/^(a|an) /, "") + "</b>";
                    } else {
                        desc += "Original Content";
                        className += "original";
                    }
                    desc += "<br>";
                    var s = pkg.status;
                    if (s.updated) {
                        className += "updated";
                        desc += "<br>Last Updated " + eventRef(s.updated) + "";
                    }
                    if (s.failed) {
                        className += " failed";
                        desc += "<br>Failed "
                            + "<b>" + (s.failed.count == 1 ? "a" : s.failed.count)
                            + "</b> recent update" + (s.failed.count == 1 ? "" : "s")
                            + ", " + eventRef(s.failed);
                    }
                    if (s.updating) {
                        className += " updating";
                        desc += "<br>Update in progress since " + eventRef(s.updating) + "";
                    }
                    desc += "<br>";
                    // feeds
                    desc += "<br>";
                    desc += "<img alt='News Feed of' src='.self/feed-icon-12x12.png'> ";
                    desc += "<a href='/geoul/pkgs/" + this.id + "/news.feed'>all updates</a>, ";
                    desc += "<a href='/geoul/pkgs/" + this.id + "/problems.feed'>only problematic ones</a><br>";
                    // usage graphs
                    desc += "<br>";
                    desc += "<img src='/geoul/pkgs/" + this.id + "/usage.png' alt='network usage'><br>";
                    desc += "<img src='/geoul/pkgs/" + this.id + "/du.png' alt='disk usage'><br>";

                    var li = this.parentNode;
                    li.className = className;
                    $(".status", li).html(desc);
                    if (jQuery.fn.prettyDate)
                        $(".status time").prettyDate();
                });
            $(activeItem).addClass("active");
        });
}

function initStatus() {
    $("#contents a").each(function(){
            $(this.parentNode).append("<div class='status'></div>");
        });
    $("#contents li").click(function() {
            if (this == activeItem) {
                $(this).removeClass("active");
                activeItem = null;
            } else {
                $(this).addClass("active");
                $(activeItem).removeClass("active");
                activeItem = this;
            }
        });
    updateStatus();
    setInterval(updateStatus, 60*1000);
}

initStatus();
</script>
<style type="text/css">
    #contents li.original,
    #contents li.updated  { list-style-image: url(.self/icon_check.png); }
    #contents li.failed   { list-style-image: url(.self/icon_warning.png); }
    #contents li.updating { list-style-image: url(.self/icon_progress.gif); }
    #contents li.failed   > a { color: red; }
    #contents li.updating > a { background-color: yellow; }
    #contents .status time {
        font-weight: bold;
    }
    #contents .status {
        display: none;
        position: absolute;
        color: rgb(18,51,192);
        border: 1px solid rgb(18,51,192);
        background-color: rgb(136,193,253);
        -moz-box-shadow: 0px 10px 20px #888;
        -webkit-box-shadow: 0px 10px 20px #888;
        box-shadow: 0px 10px 20px #888;
        font-size: 0.8em;
        white-space: nowrap;
        width: auto;
        margin-left: 3em;
        padding: 0em 1em 1em;
    }
    #contents li.active > a,
    #contents li:hover > a {
        font-weight: bold;
    }
    #contents li:hover .status {
        display: block;
        z-index: 2;
    }
    #contents li.active .status {
        display: block;
        margin-left: 11em;
        z-index: 1;
    }
</style>

</body>
</html>
